import{s as u,e as n,F as _,t as x,c as b,w as h,n as a,v as $,x as v,y as f,z as w,A as C,B as I,r as y,C as p,D as T,E as B,p as M}from"./vendor.js";import{a as R,H as S}from"./Header_Singleton.js";import{_ as k}from"./_plugin-vue_export-helper.js";import"./BasicModel.js";const L={name:"MenuItems",components:{},props:{fetchFlags:{type:Object,default:()=>({})}},data(){return{activeRoute:this.$route.path,items:[],loading:!1,loadingError:!1,options:{page:1,itemsPerPage:10,sortBy:[],groupBy:[]},filterValsRef:{}}},computed:{superTableModel(){return R},filterValsComp(){return{...this.filterValsRef}}},methods:{isActive(e){return e.URL===this.activeRoute},clickRow(e){this.$router.push({path:e.URL})},colClasses(e=12){e=+e;const t={lg:1,md:1.5,sm:2,xs:4};function r(c){return[1,2,3,4,6,12].reduce((d,m)=>Math.abs(m-c)<Math.abs(d-c)?m:d)}const l=r(e*t.lg),s=r(e*t.md),i=r(e*t.sm),o=r(e*t.xs);return`col-${l} col-lg-${l} col-md-${s} col-sm-${i} col-xs-${o}`},async fetchData(){try{this.loading=!0,this.loadingError=!1;let e=[],t={},r={};const l=await this.superTableModel.FetchAll([],{...e,...r,...this.fetchFlags},t,{page:this.options.page,limit:this.options.itemsPerPage,filters:this.filterValsComp,clearPrimaryModelOnly:!1});this.items=l.response.data.records.map(s=>({id:s.id,createdTime:s.createdTime,...s.fields})),this.loading=!1}catch{this.loading=!1,this.loadingError=!0}}},mounted(){this.fetchData()},watch:{"$route.path"(e){this.activeRoute=e}}},F={key:0,class:"text-center q-pa-md"},V={key:1,class:"text-center q-pa-md text-grey-5"};function q(e,t,r,l,s,i){return s.items.length?(n(!0),u(_,{key:1},x(s.items,o=>(n(),b(I,{key:o.id,clickable:"",tag:"router-link",onClick:c=>i.clickRow(o),"active-class":"q-item--highlighted",class:"q-pl-lg text-h5",style:f(i.isActive(o)?"border-bottom: white solid 5px;":"border-bottom: rgba(0,0,0,0) solid 5px;")},{default:h(()=>[a($,null,{default:h(()=>[a(v,{style:f(i.isActive(o)?"font-weight: bold;":"")},{default:h(()=>[w(C(o.Label),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1032,["onClick","style"]))),128)):(n(),u(_,{key:0},[s.loading?(n(),u("div",F,"Loading...")):(n(),u("div",V,"None"))],64))}const D=k(L,[["render",q]]),P={name:"GlobalController",components:{MenuItems:D},data(){return{siteTitle:"Lorum Ipsum",loading:!0,item:{}}},computed:{id(){return"reci1Y5KdKFBkz3T1"},superTableModel(){return S},bgUrl(){var t;return(t=this.item.fields)==null?void 0:t["Site Background Image"][0].url}},methods:{fetchData(){this.loading=!0,this.superTableModel.FetchById(this.id,[],{flags:{},moreHeaders:{},rels:[]}).then(e=>{this.item=e.response.data,this.loading=!1}).catch(()=>{this.loading=!1})}},mounted(){this.fetchData()}},Q={class:"container-md row no-wrap items-center text-white"},A=["src"],E={class:"q-mt-md"};function H(e,t,r,l,s,i){var g,d;const o=y("MenuItems"),c=y("router-view");return n(),u("div",{style:f([(g=this.item.fields)!=null&&g["Site Background Image"][0].url?`background-image: url('https://capetownlists.co.za/?url=${(d=this.item.fields)==null?void 0:d["Site Background Image"][0].url}');`:"",{color:"white","min-height":"100vh","background-color":"rgb(70,70,70)"}])},[a(B,{style:{height:"100%"},class:"q-py-md"},{default:h(()=>{var m;return[p("div",Q,[p("img",{src:(m=this.item.fields)==null?void 0:m["Logo Image"][0].url,style:{height:"200px"}},null,8,A),a(T),a(o)])]}),_:1}),a(M,null,{default:h(()=>[p("div",E,[a(c)])]),_:1})],4)}const K=k(P,[["render",H]]);export{K as default};
