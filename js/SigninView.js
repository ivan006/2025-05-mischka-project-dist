import{n as w,c as V,e as r,w as m,K as o,p as t,a2 as b,a3 as x,a4 as S,v as d,H as u,a5 as p,S as c,B as v,E as y,a6 as h,V as f}from"./vendor.js";import{S as g}from"./Session.js";import"./MyBaseModel.js";const k={name:"SigninView",data(){return{form:{email:"",password:""},loading:!1,emailRule:s=>!!s||"Email is required"}},computed:{loginSession(){return g.query().withAllRecursive().first()},session(){return f.get("VITE_AUTH")}},methods:{submit(){this.loading=!0,g.signIn(this.form).then(s=>{const e=s.response.data,a=new Date;a.setDate(a.getDate()+7),e.expireDate=a.toISOString(),f.set("VITE_AUTH",e,"7d"),this.loading=!1,window.location.href="/"}).catch(()=>{this.loading=!1})}},mounted(){}},q={class:"row q-col-gutter-md"},_={class:"col-xl-6 col-md-6 col-sm-12 col-xs-12"},D={class:"q-mt-md text-center"};function B(s,e,a,E,l,n){return r(),V(h,{class:"q-pa-md"},{default:m(()=>[o("div",q,[e[5]||(e[5]=o("div",{class:"col-xl-3 col-md-3 col-sm-12 col-xs-12"},null,-1)),o("div",_,[t(b,{class:"q-pa-md"},{default:m(()=>[t(x,{onSubmit:S(n.submit,["prevent"])},{default:m(()=>[e[4]||(e[4]=o("div",{class:"text-h6 q-mb-md"},"Login",-1)),n.session?(r(),d(u,{key:1},[e[3]||(e[3]=v(" Welcome ")),o("b",null,y(n.loginSession.user.email),1)],64)):(r(),d(u,{key:0},[t(p,{modelValue:l.form.email,"onUpdate:modelValue":e[0]||(e[0]=i=>l.form.email=i),label:"Email",type:"email",outlined:"",dense:"",rules:[l.emailRule],autocomplete:"email",name:"email"},null,8,["modelValue","rules"]),t(p,{modelValue:l.form.password,"onUpdate:modelValue":e[1]||(e[1]=i=>l.form.password=i),label:"Password",type:"password",outlined:"",dense:"",autocomplete:"password",name:"password"},null,8,["modelValue"]),t(c,{type:"submit",block:"",class:"q-mt-md full-width",loading:l.loading,label:"Login",color:"primary"},null,8,["loading"]),o("div",D,[t(c,{label:"Register",class:"full-width",outline:"",color:"primary",onClick:e[2]||(e[2]=i=>s.$router.push({path:"register"}))})])],64))]),_:1,__:[4]},8,["onSubmit"])]),_:1})])])]),_:1})}const C=w(k,[["render",B]]);export{C as default};
